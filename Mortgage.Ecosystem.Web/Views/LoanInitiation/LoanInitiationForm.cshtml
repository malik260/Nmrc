@{
    Layout = "~/Views/Shared/_FormWhite.cshtml";
}


<div class="refundApplication" id="refundApplication">
    <form id="form" class="form-horizontal m">
        <div class="dialogblockborder dialogblockborderheadline">
            <div class="dialogblock-header" style="height: auto;">
                <span class="dialogblockheader">Initiate Loan</span>
                <div class="form-group">
                    <div class="col-sm-6">
                        <label class="companyNumber control-label">Loan Product <font class="red"> *</font></label>
                        <div id="loanProduct" col="Product" required>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label for="principal" class="form-label">Principal</label>
                        <input type="text" col="PrincipalAmount" class="form-control">

                    </div>

                </div>
                <div class="form-group">

                    <div class="col-sm-6">
                        <label for="rate" class="form-label">Rate</label>
                        <input type="text" col="InterestRate" class="form-control">
                    </div>

                    <div class="col-sm-6">
                        <label for="tenor" class="form-label">Tenor</label>
                        <input type="text" col="Tenor" class="form-control">

                    </div>
                </div>
                <div class="form-group">

                    <div class="col-sm-6">
                        <label for="netIncomeMonthly" class="form-label">Net&nbsp;Income&nbsp;Monthly</label>
                        <input type="text" col="propertySize" class="form-control">
                    </div>

                    <div class="col-sm-6">
                        <label for="repaymentPattern" class="form-label">Repayment Pattern</label>
                        <input type="text" class="form-control" id="repaymentPattern">
                    </div>
                </div>


                <div class="form-group">

                    <div class="col-sm-6">
                        <label class="uploadDocument control-label">Document&nbsp;Uploads</label>
                        <select id="loanProduct" col="documentUpload" class="form-control" required>
                            <option>--Select Document Title--</option>

                        </select>
                    </div>
                    <div class="col-sm-6">
                        <label for="loanPurpose" class="form-label">Loan&nbsp;Purpose</label>
                        <input type="text" col="Purpose" class="form-control" id="loanPurpose">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-6">
                        <input type="file" id="addDocument" accept=".doc,.docx,.pdf,.xlsx,.txt,.rtf,.jpg,.png,.gif,.mp3,.wav,.aac,.mp4,.avi,.mov,.zip,.rar,.tar,.exe,.dmg,.apk,.db,.mdb,.sql,.ttf,.otf,.fon,.dll,.sys,.ini" multiple />
                        <br />

                        <label for="addDocument" style=" width:140px; border: 0; padding: 12px 10px; outline: none; color: white; font-weight: bold; font-size: 13px; background: darkblue; border-radius: 4px; cursor: pointer;">
                            &nbsp; Add Document
                        </label>

                    </div>
                </div>
            </div>
        </div>

    </form>
</div>

<script>
    var id = cn.request("id");

    //$("#sector").cnComboBox({
    //    url: '@Url.Content("~/Sector/GetListJson")',
    //    key: "Id",
    //    value: "Name"
    //});
    $("#loanProduct").cnComboBox({
        url: '@Url.Content("~/CreditType/GetListJson")',
        key: "Code",
        value: "Name"
    });
    function saveForm(index) {
        //debugger
        if ($("#form").validate().form()) {
            var postData = $("#form").getWebControls({ Id: id });

            cn.ajax({
                url: '@Url.Content("~/LoanInitiation/LoanInitiation")',
                type: "post",
                data: postData,
                success: function (obj) {
                    if (obj.Tag == 1) {
                        cn.msgSuccess(obj.Message);
                        parent.searchGrid();
                        parent.layer.close(index);
                    }
                    else {
                        cn.msgError(obj.Message);
                    }
                }
            });
        }
    }

</script>
