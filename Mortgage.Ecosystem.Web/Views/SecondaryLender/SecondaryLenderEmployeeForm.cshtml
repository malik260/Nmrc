@{    Layout = "~/Views/Shared/_FormWhite.cshtml";}@inject Microsoft.AspNetCore.Hosting.IWebHostEnvironment HostingEnvironment@section header {    @BundlerHelper.Render(HostingEnvironment.ContentRootPath, Url.Content("~/lib/fileinput/5.0.3/css/fileinput.min.css"))    @BundlerHelper.Render(HostingEnvironment.ContentRootPath, Url.Content("~/lib/fileinput/5.0.3/js/fileinput.min.js"))}<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"><script src="https://cdn.jsdelivr.net/npm/flatpickr"></script><div class="wrapper animated fadeInRight">    <form id="form" class="form-horizontal m">        <div class="dialogblockborder dialogblockborderheadline">            <div class="dialogblock-header" style="height: auto;">                <span class="dialogblockheader">New Employee Record</span>                <div class="form-group" style="margin-top: 10px;">                    <div class="col-sm-6">                        @*<label class="control-label">Employer Number<font class="red"> *</font></label>                        <div id="company" col="Company"></div>*@                        <label class="control-label">Employer Number</label>                        <input id="company" readonly col="Company" type="text" class="form-control" />                    </div>                    <div class="col-sm-6">                        <label class="control-label">Employer Name</label>                        <input id="companyName" col="companyName" readonly type="text" class="form-control" />                    </div>                </div>                <div class="form-group" style="margin-top: 10px;">                    <div class="col-sm-6">                        <label class="control-label">Email<font class="red"> *</font></label>                        <input id="emailAddress" col="EmailAddress" required type="text" class="form-control" />                    </div>                    <div class="col-sm-6">                        <label class="control-label">Mobile/Telephone<font class="red"> *</font></label>                        <input id="mobileNumber" col="MobileNumber" required type="text" class="form-control" />                        <span id="error-message" class="text-danger" style="display:none;"></span>                    </div>                </div>            </div>        </div>        <div class="dialogblockborder dialogblockborderheadline">            <div class="dialogblock-body" style="height: auto;">                <span class="dialogblockheader"></span>                <div class="form-group">                    <div class="col-sm-6">                        <label class="control-label">BVN<font class="red"> *</font></label>                        <input id="bvn" col="BVN" type="text" required class="form-control" />                    </div>                    <div class="col-sm-6">                        <label class="control-label">Monthly Salary (Net Pay) <font class="red"> *</font></label>                        <input id="monthlySalary" col="MonthlySalary" required type="text" class="form-control" />                    </div>                    @* <div class="col-sm-6">                    <label class="control-label">NIN</label>                    <input id="nin" col="NIN" type="text" class="form-control" />                    </div>*@                </div>                <div class="form-group">                    <div class="col-sm-6">                        <label class="control-label">Title</label>                        <div id="title" col="Title"></div>                    </div>                    <div class="col-sm-6">                        <label class="control-label">First Name<font class="red"> *</font></label>                        <input id="firstName" col="FirstName" required type="text" class="form-control" />                    </div>                </div>                <div class="form-group">                    <div class="col-sm-6">                        <label class="control-label">Other Name(s)</label>                        <input id="otherName" col="OtherName" type="text" class="form-control" />                    </div>                    <div class="col-sm-6">                        <label class="control-label">Last Name<font class="red"> *</font></label>                        <input id="lastName" col="LastName" required type="text" class="form-control" />                    </div>                </div>                <div class="form-group">                    <div class="col-sm-6">                        <label class="control-label">Gender<font class="red"> *</font></label>                        <div id="gender" col="Gender"></div>                    </div>                    <div class="col-sm-6">                        <label class="control-label">Date of Birth<font class="red"> *</font></label>                        <div class="input-group date">                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>                            <input id="dateOfBirth" col="DateOfBirth" required type="date" class="form-control" placeholder="yyyy-MM-dd" />                        </div>                    </div>                </div>                <div class="form-group">                    <div class="col-sm-6">                        <label class="control-label">Postal Address<font class="red"> *</font></label>                        <textarea id="postalAddress" col="PostalAddress" class="form-control" required style="height:60px"></textarea>                    </div>                    <div class="col-sm-6">                        <label class="control-label">Date of Employment<font class="red"> *</font></label>                        <div class="input-group date">                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>                            <input type="date" class="form-control" required id="employmentDate" col="DateOfEmployment" placeholder="yyyy-MM-dd">                        </div>                    </div>                    @*<div class="col-sm-6">                    <label class="control-label">Marital Status</label>                    <div id="marital" col="MaritalStatus"></div>                    </div>*@                </div>                @* <div class="form-group">                <div class="col-sm-6">                <label class="control-label">Kin's Last Name</label>                <input id="kinLastName" col="KinLastName" type="text" class="form-control" />                </div>                <div class="col-sm-6">                <label class="control-label">Kin's FIrst Name</label>                <input id="kinFirstNumber" col="KinFirstNumber" type="text" class="form-control" />                </div>                </div>*@                @* <div class="form-group">                <div class="col-sm-6">                <label class="control-label">Kin's Mobile/Telephone</label>                <input id="kinMobileNumber" col="KinMobileNumber" type="text" class="form-control" />                </div>                <div class="col-sm-6">                <label class="control-label">Kin's Relationship</label>                <div id="kinRelationship" col="KinRelationship"></div>                </div>                </div>*@                @*  <div class="form-group">                <div class="col-sm-6">                <label class="control-label">Account Type</label>                <div id="accountType" col="AccountType"></div>                </div>                <div class="col-sm-6">                <label class="control-label">Bank Name</label>                <div id="bankName" col="CustomerBank"></div>                </div>                </div>*@                @* <div class="form-group">                <div class="col-sm-6">                <label class="control-label">Alert Type</label>                <div id="alertType" col="AlertType"></div>                </div>                <div class="col-sm-6">                <label class="control-label">Statement</label>                <input id="statement" col="Statement" type="text" class="form-control" />                </div>                </div>*@                <hr />                @* <div class="form-group">                <div class="col-sm-12">                <label class="control-label">Privileges</label>                <div id="menuTree" class="ztree"></div>                </div>                </div>*@            </div>        </div>    </form></div><!-- SweetAlert2 CSS --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"><!-- SweetAlert2 JS --><script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script><script type="text/javascript">    var id = cn.request("id");    $(function () {        $('#company').cnComboBoxTree({ url: '@Url.Content("~/Company/GetCompanyTreeListJson")' });        $("#title").cnComboBox({            url: '@Url.Content("~/Title/GetListJson")',            key: "Id",            value: "Name",            class: "form-control"        });        $("#gender").cnComboBox({            url: '@Url.Content("~/Gender/GetListJson")',            key: "Id",            value: "Name",            class: "form-control"        });        //laydate.render({ elem: '#dateOfBirth', type: 'date', theme: 'molv' });        $("#marital").cnComboBox({            url: '@Url.Content("~/MaritalStatus/GetListJson")',            key: "Id",            value: "Name",            class: "form-control"        });        $("#kinRelationship").cnComboBox({            url: '@Url.Content("~/Relation/GetListJson")',            key: "Id",            value: "Name",            class: "form-control"        });        $("#bankName").cnComboBox({            url: '@Url.Content("~/Bank/GetListJson")',            key: "Name",            value: "Name"        });        $("#branch").cnComboBox({            url: '@Url.Content("~/State/GetListJson")',            key: "Id",            value: "Name",            class: "form-control"        });        //laydate.render({ elem: '#employmentDate', type: 'date', theme: 'molv' });        $("#accountType").cnComboBox({            url: '@Url.Content("~/AccountType/GetListJson")',            key: "Id",            value: "Name",            class: "form-control"        });        $("#alertType").cnComboBox({            url: '@Url.Content("~/AlertType/GetListJson")',            key: "Id",            value: "Name",            class: "form-control"        });        loadMenuTree();        getForm();        $("#form").validate({            rules: {                emailAddress: {                    required: true,                    email: true,                },                mobileNumber: {                    required: true,                    //isPhone: true,                }            },            messages: {                emailAddress: { required: "Email is required" },                mobileNumber: { required: "Mobile number is required" }            }        });    });    $('#mobileNumber').keyup(function (e) {        if (/[^0-9\d ]/i.test(this.value)) {            // Filter non-digits from input value.            // this.value = this.value.replace(/\D/g, '');            //Filter special character            this.value = this.value.replace(/[^0-9\d ]/i, '');        }    })    $('#monthlySalary').keyup(function (e) {        if (/[^0-9\d ]/i.test(this.value)) {            // Filter non-digits from input value.            // this.value = this.value.replace(/\D/g, '');            //Filter special character            this.value = this.value.replace(/[^0-9\d ]/i, '');        }    })    $(document).ready(function () {        $('#mobileNumber').on('input keyup', function () {            var mobileNumber = $(this).val();            var errorMessage = $('#error-message');            // Remove existing error message            errorMessage.hide();            // Check if the input is numeric            var numericReg = /^\d*$/;            if (!numericReg.test(mobileNumber)) {                errorMessage.text('Numeric characters only.').show();                return;            }            // Check if the input starts with '0'            if (mobileNumber.length > 0 && mobileNumber[0] !== '0') {                errorMessage.text('Mobile Number must start with 0').show();            } else {                errorMessage.hide();            }        });    });    $(document).ready(function () {        $('#mobileNumber').on('input', function () {            var maxLength = 11;            if ($(this).val().length > maxLength) {                $(this).val($(this).val().slice(0, maxLength));            }        });    });    flatpickr("#dateOfBirth", {        //defaultDate: "today",        maxDate: "2005-01-01",        inline: false,        allowInput: true    });    $('#kinMobileNumber').on('blur', function (event) {        $('span.error-keyup-1').hide();        var plength = $("#kinMobileNumber").val().length;        if (plength > 11) {            event.preventDefault();            //$('#uBankaccountno').val('');            $(this).after('<span class="text-danger error-keyup-1">Mobile Number should not be more than 11 digits</span>');            return false;        }        else if (plength < 11) {            event.preventDefault();            //$('#uBankaccountno').val('');            $(this).after('<span class="text-danger error-keyup-1">Mobile Number should not be less than 11 digits</span>');            return false;        }    });    $('#monthlySalary').on("keyup", function () {        $('span.error-keyup-1').hide();        var inputVal = $(this).val();        var numericReg = /^\d*[0-9](|.\d*[0-9]|,\d*[0-9])?$/;        if (!numericReg.test(inputVal)) {            //$("#Monthlysalary, #uMonthlysalary, #uuMonthlysalary").val("");            $(this).after('<span class="text-danger error-keyup-1">Numeric characters only.</span>');        }    });    $(document).ready(function () {        $.ajax({            url: '@Url.Content("~/Company/GetCompanyInfo")', // The URL of your controller method            type: 'GET',            dataType: 'json',            success: function (obj) {                if (obj.Tag == 1) {                    var data = obj.Data;                    $('#company').val(data.companyNumber);                    $('#companyName').val(data.companyName);                } else {                    cn.msgError(obj.Message);                    $('#form').hide();                }            },            error: function () {                // Handle error, if any            }        });    });    flatpickr("#employmentDate", {        //defaultDate: "today",        maxDate: "today",        inline: false,        allowInput: true    });    function loadMenuTree() {        $('#menuTree').cnTree({            async: false,            url: '@Url.Content("~/Menu/GetMenuTreeListJson")',            check: { enable: true },            expandLevel: 0        })    }    function getForm() {        if (id > 0) {            cn.ajax({                url: '@Url.Content("~/Employee/GetFormJson")' + '?id=' + id,                type: "get",                success: function (obj) {                    if (obj.Tag == 1) {                        var result = obj.Data;                        $("#form").setWebControls(result);                        $('#menuTree').cnTree("setCheckedNodes", result.MenuIds);                    }                }            });        }        else {            var defaultData = {};            defaultData.Company = "";            defaultData.EmailAddress = ""            defaultData.MobileNumber = "";            $("#form").setWebControls(defaultData);        }    }    $('#bvn').keyup(function (e) {        if (/[^0-9\d ]/i.test(this.value)) {            // Filter non-digits from input value.            // this.value = this.value.replace(/\D/g, '');            //Filter special character            this.value = this.value.replace(/[^0-9\d ]/i, '');        }    })    $(document).ready(function () {        $('#bvn').on('input', function () {            var maxLength = 11;            if ($(this).val().length > maxLength) {                $(this).val($(this).val().slice(0, maxLength));            }        });    });    $('#mobileNumber').keyup(function (e) {        if (/[^0-9\d ]/i.test(this.value)) {            // Filter non-digits from input value.            // this.value = this.value.replace(/\D/g, '');            //Filter special character            this.value = this.value.replace(/[^0-9\d ]/i, '');        }    })    $(document).ready(function () {        $('#mobileNumber').on('input', function () {            var maxLength = 11;            if ($(this).val().length > maxLength) {                $(this).val($(this).val().slice(0, maxLength));            }        });    });    function saveForm(index) {        if ($("#form").validate().form()) {            var postData = $("#form").getWebControls({ Id: id });            postData.Company = cn.getLastValue(postData.Company);            postData.Title = cn.getLastValue(postData.Title);            postData.Gender = cn.getLastValue(postData.Gender);            if (postData.Title <= 0) {                cn.msgError("Please select Title!");                return false;            } else if (postData.Gender <= 0) {                cn.msgError("Please select Gender!");                return false;            }            Swal.fire({                title: 'PMB Employee Registration',                text: "Do you want to proceed with the registration?",                icon: 'warning',                showCancelButton: true,                confirmButtonColor: '#3085d6',                cancelButtonColor: '#d33',                confirmButtonText: 'Yes, proceed!'            }).then((result) => {                if (result.isConfirmed) {                    cn.ajax({                        url: '@Url.Content("~/SecondaryLender/SaveNewEmployee")',                        type: "post",                        data: postData,                        success: function (obj) {                            if (obj.Tag == 1) {                                Swal.fire({                                    icon: 'success',                                    title: 'Success',                                    text: obj.Message,                                }).then(() => {                                    parent.searchGrid();                                    parent.layer.close(index);                                });                            } else {                                Swal.fire({                                    icon: 'error',                                    title: 'Error',                                    text: obj.Message,                                });                            }                        },                        error: function (xhr, status, error) {                            Swal.fire({                                icon: 'error',                                title: 'Error',                                text: 'An error occurred while processing the request.',                            });                        }                    });                }            });        }    }</script>